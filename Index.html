Practicing employment skills is key to a successful career. Use the tool below to simulate an interview and hone your skills.
</p>

            <!-- Table for Practice Job Application -->
            <div class="career-table-container flex justify-center">
                <table class="career-table rounded-lg">
                    <thead>
                        <tr>
                            <th>Practice Job Application</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <a href="https://www.careeronestop.org/Toolkit/Jobs/practice-job-application-form.aspx?practice-job-application-form.aspx=" target="_blank" rel="noopener noreferrer">Career One Stop Practice Application</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

<!-- Table for the Interview Question Generator -->
<div class="career-table-container flex justify-center">
<table class="career-table rounded-lg">
@@ -184,4 +202,114 @@ <h2 class="text-3xl font-bold mb-4 text-gray-800">Employment Skills to Practice<
Generate Interview Questions ✨
<svg id="questions-loading-spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fil
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="questions-output" class="mt-8"></div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
        </div>
    </section>
    
    <!-- About Section -->
    <section id="about" class="py-16 text-center">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold mb-4 text-gray-800">About Our Class</h2>
            <p class="text-lg text-gray-700 max-w-3xl mx-auto">
                Mr. Francis's Career Exploration Class is dedicated to providing middle school students with a foundational understanding of various career fields. Our goal is to inspire curiosity, foster critical thinking, and help students envision their potential contributions to the world. We believe that early exposure to different professions can ignite lifelong passions and guide informed academic and career choices. In this career exploration class, students have voice and choice, allowing them to select career fields or individual subjects that they are interested in, and lessons are tailored to student interests to increase relevance and buy-in for each group of students while still adhering to the Arizona Career Literacy Standards for grades 6-8.
            </p>
        </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer-bg text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 Mr. Francis's Career Exploration Class. All rights reserved.</p>
            <p class="text-sm mt-2">Designed with passion for the future leaders of Yuma, Arizona.</p>
        </div>
    </footer>
    
    <!-- JavaScript for Gemini API integration -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const generateQuestionsBtn = document.getElementById('generate-questions-btn');
            const careerFieldInput = document.getElementById('career-field-input');
            const questionsOutput = document.getElementById('questions-output');
            const questionsLoadingSpinner = document.getElementById('questions-loading-spinner');

            generateQuestionsBtn.addEventListener('click', async () => {
                const careerField = careerFieldInput.value.trim();

                if (careerField === '') {
                    questionsOutput.innerHTML = '<div class="suggestion-box bg-red-100 border-red-500 text-red-700">Please enter a career field to get interview questions.</div>';
                    return;
                }

                // Check if the page is being run from a local file path
                if (window.location.protocol === 'file:') {
                    questionsOutput.innerHTML = `<div class="suggestion-box bg-yellow-100 border-yellow-500 text-yellow-700">
                        This feature requires a deployed website to work securely. Please try again after you have pushed your changes to GitHub and Netlify has updated your live site.
                    </div>`;
                    return;
                }

                // Show loading state
                generateQuestionsBtn.disabled = true;
                questionsLoadingSpinner.classList.remove('hidden');
                generateQuestionsBtn.innerHTML = 'Generating Questions...'
                questionsOutput.innerHTML = '';
                
                let retryCount = 0;
                const maxRetries = 3;
                let success = false;

                while (retryCount < maxRetries && !success) {
                    try {
                        const response = await fetch('/.netlify/functions/generate-questions', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ careerField })
                        });

                        if (!response.ok) {
                            throw new Error(`API call failed with status: ${response.status}`);
                        }

                        const result = await response.json();
                        const text = result.text;

                        if (text) {
                            questionsOutput.innerHTML = `<div class="suggestion-box bg-blue-100 border-blue-500 text-gray-800 prose max-w-none">${text}</div>`;
                            success = true;
                        } else {
                            throw new Error('No text was returned from the API.');
                        }

                    } catch (error) {
                        console.error('Error during API call:', error);
                        retryCount++;
                        if (retryCount < maxRetries) {
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, retryCount) * 1000)); // Exponential backoff
                        } else {
                            // More descriptive error message for network issues
                            questionsOutput.innerHTML = '<div class="suggestion-box bg-red-100 border-red-500 text-red-700">Sorry, we could not connect to the career advisor. Please check your network connection and try again.</div>';
                        }
                    } finally {
                        if (success || retryCount >= maxRetries) {
                            // Revert button state
                            generateQuestionsBtn.disabled = false;
                            questionsLoadingSpinner.classList.add('hidden');
                            generateQuestionsBtn.innerHTML = 'Generate Interview Questions ✨';
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
