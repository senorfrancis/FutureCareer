<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Francis's Career Exploration Class</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Using Crane Middle School inspired colors: a deep blue, a lighter blue, and an accent yellow/gold */
            background-color: #f0f4f8; /* Light gray-blue background */
        }
        .header-bg {
            background-color: #1a365d; /* Darker blue, similar to school colors */
        }
        .accent-color {
            color: #f6ad55; /* Gold/Yellow accent */
        }
        .button-bg {
            background-color: #3182ce; /* Medium blue */
        }
        .button-bg:hover {
            background-color: #2c5282; /* Darker hover state */
        }
        .card-bg {
            background-color: #ffffff; /* White card background */
        }
        .footer-bg {
            background-color: #1a365d; /* Darker blue for footer */
        }
        /* Custom styles for the new table */
        .career-table {
            width: 100%;
            max-width: 600px;
            margin: 2rem auto;
            border-collapse: collapse;
            box-shadow: 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 0.5rem;
            overflow: hidden; /* Ensures rounded corners apply to content */
        }
        .career-table th, .career-table td {
            padding: 1rem;
            text-align: center;
            border: 1px solid #e2e8f0; /* Light gray border */
        }
        .career-table th {
            background-color: #3182ce; /* Medium blue for header */
            color: white;
            font-weight: 600;
        }
        .career-table td {
            background-color: #ffffff; /* White for cells */
        }
        .career-table a {
            color: #1a365d; /* Dark blue for links */
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .career-table a:hover {
            color: #f6ad55; /* Gold/Yellow on hover */
            text-decoration: underline;
        }
        .suggestion-box {
            background-color: #f0f9ff;
            border-left: 4px solid #3182ce;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.25rem;
            text-align: left;
        }
        .career-explorer-cell {
            padding: 1rem;
            background-color: #ffffff;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header Section -->
    <header class="header-bg shadow-lg py-4">
        <div class="container mx-auto px-4 flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold text-white mb-2 md:mb-0">Mr. Francis's Career Exploration Class</h1>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="#home" class="text-white hover:text-gray-300 font-medium rounded-lg p-2 transition duration-300 ease-in-out">Home</a></li>
                    <li><a href="#about" class="text-white hover:text-gray-300 font-medium rounded-lg p-2 transition duration-300 ease-in-out">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="py-16 text-center">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-extrabold mb-4 accent-color">Discover Your Future!</h2>
            <p class="text-lg text-gray-700 max-w-3xl mx-auto mb-8">
                Welcome to Mr. Francis's Career Exploration Class! Here, students embark on an exciting journey to discover their passions, explore diverse career paths, and build essential skills for their future. Through hands-on activities, guest speakers, and engaging projects, we're preparing the next generation of innovators and leaders.
            </p>
            <!-- Personality Assessment Table -->
            <div class="career-table-container flex justify-center">
                <table class="career-table rounded-lg">
                    <thead>
                        <tr>
                            <th colspan="2">Discover your personality traits and characteristics:</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><a href="https://www.16personalities.com/" target="_blank" rel="noopener noreferrer">16Personalities Test</a></td>
                            <td><a href="https://bigfive-test.com/" target="_blank" rel="noopener noreferrer">Big Five Test</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- AI Career Chat Table -->
            <div class="career-table-container flex justify-center">
                <table class="career-table rounded-lg">
                    <thead>
                        <tr>
                            <th colspan="2">Chat with AI to help plan out your future:</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><a href="https://student.schoolai.com/student-space?code=CMVP" target="_blank" rel="noopener noreferrer">AI Career Compass</a></td>
                            <td><a href="https://student.schoolai.com/dot/spaces/join?code=9NJZ-6B59" target="_blank" rel="noopener noreferrer">Future Finder Career Coach</a></td>
                        </tr>
                        <tr>
                            <td colspan="2" class="career-explorer-cell">
                                <p class="text-lg text-gray-700 mb-4">
                                    Describe your personality, what you're good at, and what you enjoy doing. Our AI career coach will provide personalized career suggestions!
                                </p>
                                <textarea id="career-description" rows="5" class="w-full p-4 rounded-lg border-2 border-gray-300 focus:outline-none focus:border-blue-500 transition duration-300" placeholder="e.g., 'I am creative and enjoy drawing and telling stories. I'm good at working with computers and like to solve puzzles.'"></textarea>
                                <div class="flex justify-center mt-4">
                                    <button id="get-suggestions-btn" class="button-bg text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition duration-300 ease-in-out flex items-center">
                                        Get Career Suggestions ✨
                                        <svg id="loading-spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="suggestions-output" class="mt-8"></div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Chat with a professional table -->
            <div class="career-table-container flex justify-center">
                <table class="career-table rounded-lg">
                    <thead>
                        <tr>
                            <th colspan="2">Chat with a professional in your career field of interest and ask questions:</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><a href="https://www.careervillage.org/" target="_blank" rel="noopener noreferrer">Career Village</a></td>
                            <td><a href="https://www.linkedin.com" target="_blank" rel="noopener noreferrer">LinkedIn</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 text-center">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold mb-4 text-gray-800">About Our Class</h2>
            <p class="text-lg text-gray-700 max-w-3xl mx-auto">
                Mr. Francis's Career Exploration Class is dedicated to providing middle school students with a foundational understanding of various career fields. Our goal is to inspire curiosity, foster critical thinking, and help students envision their potential contributions to the world. We believe that early exposure to different professions can ignite lifelong passions and guide informed academic and career choices. In this career exploration class, students have voice and choice, allowing them to select career fields or individual subjects that they are interested in, and lessons are tailored to student interests to increase relevance and buy-in for each group of students while still adhering to the Arizona Career Literacy Standards for grades 6-8.
            </p>
        </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer-bg text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 Mr. Francis's Career Exploration Class. All rights reserved.</p>
            <p class="text-sm mt-2">Designed with passion for the future leaders of Yuma, Arizona.</p>
        </div>
    </footer>
    
    <!-- JavaScript for Gemini API integration -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const getSuggestionsBtn = document.getElementById('get-suggestions-btn');
            const careerDescriptionInput = document.getElementById('career-description');
            const suggestionsOutput = document.getElementById('suggestions-output');
            const loadingSpinner = document.getElementById('loading-spinner');

            getSuggestionsBtn.addEventListener('click', async () => {
                const userDescription = careerDescriptionInput.value.trim();

                if (userDescription === '') {
                    suggestionsOutput.innerHTML = '<div class="suggestion-box bg-red-100 border-red-500 text-red-700">Please enter a description of your interests and skills.</div>';
                    return;
                }

                // Show loading state
                getSuggestionsBtn.disabled = true;
                loadingSpinner.classList.remove('hidden');
                getSuggestionsBtn.innerHTML = 'Getting Suggestions...'
                suggestionsOutput.innerHTML = '';

                let retryCount = 0;
                const maxRetries = 3;
                let success = false;

                while (retryCount < maxRetries && !success) {
                    try {
                        const prompt = `Act as a friendly and encouraging career advisor for a middle school student. Based on the following description of their personality and interests, provide 3-5 potential career fields and briefly explain in a positive tone why each would be a good fit. Use markdown to format the career titles as bold headings and each explanation as a paragraph.
                        Student's description:
                        ${userDescription}`;

                        const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                        const payload = { contents: chatHistory };
                        const apiKey = "";
                        const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=" + apiKey;

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            throw new Error(`API call failed with status: ${response.status}`);
                        }

                        const result = await response.json();
                        const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;

                        if (text) {
                            suggestionsOutput.innerHTML = `<div class="suggestion-box bg-blue-100 border-blue-500 text-gray-800 prose max-w-none">${text}</div>`;
                            success = true;
                        } else {
                            throw new Error('No text was returned from the API.');
                        }

                    } catch (error) {
                        console.error('Error during API call:', error);
                        retryCount++;
                        if (retryCount < maxRetries) {
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, retryCount) * 1000)); // Exponential backoff
                        } else {
                            suggestionsOutput.innerHTML = '<div class="suggestion-box bg-red-100 border-red-500 text-red-700">Sorry, there was an error getting suggestions. Please try again.</div>';
                        }
                    } finally {
                        if (success || retryCount >= maxRetries) {
                            // Revert button state
                            getSuggestionsBtn.disabled = false;
                            loadingSpinner.classList.add('hidden');
                            getSuggestionsBtn.innerHTML = 'Get Career Suggestions ✨';
                        }
                    }
                }
            });
        });
    </script>

</body>
</html>
